{"version":3,"file":"main-CPS_smad.js","sources":["../../ar-animation.js","../../image-tracker.js","../../main.js"],"sourcesContent":["// ÁßªÈô§Three.js‰æùËµñÔºåÂè™‰ΩøÁî®ÂéüÁîüCanvas API\n// import * as THREE from 'three';\n\nexport class ARAnimation {\n    constructor() {\n        this.canvas = null;\n        this.isVisible = false;\n        this.isRunning = false;\n        this.targetPosition = { x: 0, y: 0 };\n        this.targetSize = { width: 100, height: 100 };\n        \n        // PNGÈÄêÂ∏ßÂä®ÁîªÁõ∏ÂÖ≥ - ‰ºòÂåñÁâàÊú¨\n        this.frames = []; // Â≠òÂÇ®ÊâÄÊúâÂ∏ßÂõæÁâá\n        this.currentFrame = 0; // ÂΩìÂâçÂ∏ßÁ¥¢Âºï\n        this.frameCount = 0; // ÊÄªÂ∏ßÊï∞\n        this.fps = 8; // Èôç‰ΩéÂ∏ßÁéáÂà∞8fpsÔºåÂáèÂ∞ëCPU‰ΩøÁî®\n        this.lastFrameTime = 0; // ‰∏ä‰∏ÄÂ∏ßÊó∂Èó¥\n        this.isLoaded = false; // ÊòØÂê¶Âä†ËΩΩÂÆåÊàê\n        \n        // 2D CanvasÂä®ÁîªÁõ∏ÂÖ≥\n        this.ctx = null;\n        this.animationId = null;\n        \n        // ÊÄßËÉΩ‰ºòÂåñÔºöÈ¢ÑËÆ°ÁÆóÂ∞∫ÂØ∏\n        this.cachedSizes = new Map();\n        \n        console.log('ARÂä®ÁîªÁ±ªÂàùÂßãÂåñÂÆåÊàê');\n    }\n\n    start(canvas, position, size) {\n        if (!canvas) return;\n        \n        console.log('ÂêØÂä®ARÂä®Áîª...');\n        \n        this.canvas = canvas;\n        this.ctx = canvas.getContext('2d');\n        this.targetPosition = position || { x: 0, y: 0 };\n        this.targetSize = size || { width: 100, height: 100 };\n        \n        if (!this.isRunning) {\n            this.isRunning = true;\n            this.isVisible = true;\n            this.lastFrameTime = performance.now();\n            this.animate();\n        }\n        \n        console.log('ARÂä®ÁîªÂ∑≤ÂêØÂä®');\n    }\n\n    stop() {\n        console.log('ÂÅúÊ≠¢ARÂä®Áîª...');\n        \n        this.isRunning = false;\n        this.isVisible = false;\n        \n        if (this.animationId) {\n            cancelAnimationFrame(this.animationId);\n            this.animationId = null;\n        }\n        \n        // Ê∏ÖÈô§canvas\n        if (this.ctx && this.canvas) {\n            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        }\n        \n        console.log('ARÂä®ÁîªÂ∑≤ÂÅúÊ≠¢');\n    }\n\n    // ‰ºòÂåñÁöÑÈÄêÂ∏ßÂä®ÁîªÂæ™ÁéØ\n    animate() {\n        if (!this.isRunning || !this.ctx || !this.canvas) return;\n        \n        const currentTime = performance.now();\n        const deltaTime = currentTime - this.lastFrameTime;\n        \n        // Ê†πÊçÆÂ∏ßÁéáÊõ¥Êñ∞Â∏ß\n        if (deltaTime >= (1000 / this.fps)) {\n            this.currentFrame = (this.currentFrame + 1) % this.frameCount;\n            this.lastFrameTime = currentTime;\n        }\n        \n        // Ê∏ÖÈô§‰πãÂâçÁöÑÁªòÂà∂\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        \n        // ÁªòÂà∂ÂΩìÂâçÂ∏ß\n        this.drawCurrentFrame();\n        \n        // ÁªßÁª≠Âä®ÁîªÂæ™ÁéØ\n        this.animationId = requestAnimationFrame(() => this.animate());\n    }\n\n    // ‰ºòÂåñÁöÑÁªòÂà∂ÂΩìÂâçÂ∏ß\n    drawCurrentFrame() {\n        if (!this.isLoaded || this.frames.length === 0) {\n            console.log('Âä®ÁîªÊú™Âä†ËΩΩÂÆåÊàêÔºåË∑≥ËøáÁªòÂà∂', {\n                isLoaded: this.isLoaded,\n                framesCount: this.frames.length,\n                currentFrame: this.currentFrame\n            });\n            \n            // Âú®canvas‰∏äÁªòÂà∂Ë∞ÉËØï‰ø°ÊÅØ\n            if (this.ctx && this.canvas) {\n                this.ctx.fillStyle = 'rgba(255, 0, 0, 0.8)';\n                this.ctx.fillRect(10, 10, 300, 60);\n                this.ctx.fillStyle = 'white';\n                this.ctx.font = '16px Arial';\n                this.ctx.fillText('Âä®ÁîªÊú™Âä†ËΩΩ', 20, 35);\n                this.ctx.fillText(`Â∑≤Âä†ËΩΩ: ${this.frames.filter(f => f).length}/${this.frameCount}`, 20, 55);\n            }\n            return;\n        }\n        \n        const frame = this.frames[this.currentFrame];\n        if (!frame) {\n            console.log('ÂΩìÂâçÂ∏ß‰∏çÂ≠òÂú®', {\n                currentFrame: this.currentFrame,\n                totalFrames: this.frameCount,\n                frames: this.frames.map(f => f ? 'loaded' : 'null')\n            });\n            \n            // Âú®canvas‰∏äÁªòÂà∂Ë∞ÉËØï‰ø°ÊÅØ\n            if (this.ctx && this.canvas) {\n                this.ctx.fillStyle = 'rgba(255, 165, 0, 0.8)';\n                this.ctx.fillRect(10, 10, 300, 60);\n                this.ctx.fillStyle = 'white';\n                this.ctx.font = '16px Arial';\n                this.ctx.fillText('ÂΩìÂâçÂ∏ß‰∏çÂ≠òÂú®', 20, 35);\n                this.ctx.fillText(`Â∏ß${this.currentFrame} / ÊÄª${this.frameCount}`, 20, 55);\n            }\n            return;\n        }\n        \n        // ‰ΩøÁî®ÁºìÂ≠òÁöÑÂ∞∫ÂØ∏ËÆ°ÁÆó\n        const drawInfo = this.getCachedDrawInfo(frame);\n        \n        // ÁªòÂà∂ÂΩìÂâçÂ∏ß\n        this.ctx.drawImage(\n            frame, \n            drawInfo.x, \n            drawInfo.y, \n            drawInfo.width, \n            drawInfo.height\n        );\n        \n        // ÁªòÂà∂Ë∞ÉËØïËæπÊ°Ü\n        this.ctx.strokeStyle = 'lime';\n        this.ctx.lineWidth = 2;\n        this.ctx.strokeRect(drawInfo.x, drawInfo.y, drawInfo.width, drawInfo.height);\n        \n        // ÁªòÂà∂Â∏ß‰ø°ÊÅØ\n        this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n        this.ctx.fillRect(drawInfo.x, drawInfo.y - 25, 150, 25);\n        this.ctx.fillStyle = 'white';\n        this.ctx.font = '12px Arial';\n        this.ctx.fillText(`Â∏ß${this.currentFrame + 1}/${this.frameCount}`, drawInfo.x + 5, drawInfo.y - 8);\n        \n        // Ë∞ÉËØï‰ø°ÊÅØÔºöÊØè10Â∏ßËæìÂá∫‰∏ÄÊ¨°\n        if (this.currentFrame % 10 === 0) {\n            console.log('ÁªòÂà∂Âä®ÁîªÂ∏ß', {\n                frame: this.currentFrame,\n                position: drawInfo,\n                frameSize: `${frame.width}x${frame.height}`,\n                canvasSize: `${this.canvas.width}x${this.canvas.height}`\n            });\n        }\n    }\n\n    // ÁºìÂ≠òÁªòÂà∂‰ø°ÊÅØÔºåÈÅøÂÖçÈáçÂ§çËÆ°ÁÆó\n    getCachedDrawInfo(frame) {\n        const cacheKey = `${frame.width}-${frame.height}-${this.targetSize.width}-${this.targetSize.height}`;\n        \n        if (this.cachedSizes.has(cacheKey)) {\n            return this.cachedSizes.get(cacheKey);\n        }\n        \n        // ËÆ°ÁÆóÁªòÂà∂‰ΩçÁΩÆÂíåÂ§ßÂ∞è\n        const centerX = this.targetPosition.x;\n        const centerY = this.targetPosition.y;\n        \n        // ‰ΩøÁî®Êõ¥Â§ßÁöÑÂ∞∫ÂØ∏ÔºåÁ°Æ‰øùÂä®ÁîªË∂≥Â§üÂ§ß‰∏îÊ∏ÖÊô∞\n        const minSize = 120; // Á®çÂæÆÂáèÂ∞èÊúÄÂ∞èÂ∞∫ÂØ∏\n        const maxSize = Math.max(this.targetSize.width, this.targetSize.height);\n        const size = Math.max(minSize, maxSize * 1.0); // ÂáèÂ∞ëÁº©ÊîæÂÄçÊï∞\n        \n        // ËÆ°ÁÆóÂ∏ßÁöÑÁªòÂà∂‰ΩçÁΩÆÂíåÂ§ßÂ∞è\n        const frameWidth = frame.width;\n        const frameHeight = frame.height;\n        const scale = Math.min(size / frameWidth, size / frameHeight);\n        const drawWidth = frameWidth * scale;\n        const drawHeight = frameHeight * scale;\n        \n        // ËÆ°ÁÆóÂ∑¶‰∏äËßí‰ΩçÁΩÆ\n        const drawX = centerX - drawWidth / 2;\n        const drawY = centerY - drawHeight / 2;\n        \n        // ËæπÁïåÊ£ÄÊü•ÔºåÁ°Æ‰øùÂä®Áîª‰∏ç‰ºöË∂ÖÂá∫Â±èÂπï\n        const viewportWidth = window.innerWidth;\n        const viewportHeight = window.innerHeight;\n        \n        let finalX = Math.max(10, Math.min(drawX, viewportWidth - drawWidth - 10));\n        let finalY = Math.max(10, Math.min(drawY, viewportHeight - drawHeight - 10));\n        \n        const drawInfo = { x: finalX, y: finalY, width: drawWidth, height: drawHeight };\n        \n        // ÁºìÂ≠òÁªìÊûú\n        this.cachedSizes.set(cacheKey, drawInfo);\n        \n        return drawInfo;\n    }\n\n    // ‰ºòÂåñÁöÑPNGÈÄêÂ∏ßÂä®ÁîªÂä†ËΩΩ\n    loadFrames() {\n        return new Promise((resolve, reject) => {\n            const framePaths = [\n                '/images/GIF1.png',\n                '/images/GIF2.png',\n                '/images/GIF3.png',\n                '/images/GIF4.png'\n            ];\n            \n            let loadedCount = 0;\n            let errorCount = 0;\n            const totalFrames = framePaths.length;\n            \n            console.log('ÂºÄÂßãÂä†ËΩΩPNGÂä®ÁîªÂ∏ß...', framePaths);\n            \n            // ËÆæÁΩÆÊÄª‰ΩìË∂ÖÊó∂\n            const overallTimeout = setTimeout(() => {\n                if (loadedCount < totalFrames) {\n                    console.error('Âä®ÁîªÂä†ËΩΩË∂ÖÊó∂ÔºåÂ∑≤Âä†ËΩΩ:', loadedCount, '/', totalFrames);\n                    reject(new Error('Âä®ÁîªÂä†ËΩΩË∂ÖÊó∂'));\n                }\n            }, 5000); // Â¢ûÂä†Ë∂ÖÊó∂Êó∂Èó¥Âà∞5Áßí\n            \n            framePaths.forEach((path, index) => {\n                const img = new Image();\n                \n                img.onload = () => {\n                    loadedCount++;\n                    console.log(`‚úÖ Â∏ß${index + 1}Âä†ËΩΩÊàêÂäü:`, path, `(${img.width}x${img.height})`);\n                    this.frames[index] = img;\n                    \n                    if (loadedCount === totalFrames) {\n                        clearTimeout(overallTimeout);\n                        this.frameCount = totalFrames;\n                        this.isLoaded = true;\n                        console.log('üéâ ÊâÄÊúâÂä®ÁîªÂ∏ßÂä†ËΩΩÂÆåÊàê!', {\n                            totalFrames: this.frameCount,\n                            frames: this.frames.map(f => f ? `${f.width}x${f.height}` : 'null')\n                        });\n                        resolve();\n                    }\n                };\n                \n                img.onerror = (error) => {\n                    errorCount++;\n                    console.error(`‚ùå Â∏ß${index + 1}Âä†ËΩΩÂ§±Ë¥•:`, path, error);\n                    this.frames[index] = null;\n                    \n                    if (errorCount === totalFrames) {\n                        clearTimeout(overallTimeout);\n                        console.error('ÊâÄÊúâÂä®ÁîªÂ∏ßÂä†ËΩΩÂ§±Ë¥•');\n                        reject(new Error('ÊâÄÊúâÂä®ÁîªÂ∏ßÂä†ËΩΩÂ§±Ë¥•'));\n                    }\n                };\n                \n                // Ê∑ªÂä†Ë∑®ÂüüÊîØÊåÅ\n                img.crossOrigin = 'anonymous';\n                img.src = path;\n                console.log(`üîÑ ÂºÄÂßãÂä†ËΩΩÂ∏ß${index + 1}:`, path);\n            });\n        });\n    }\n\n    // ÂÖºÂÆπÊóßÁâàÊú¨ÁöÑGIFÂä†ËΩΩÊñπÊ≥ï\n    loadGif(gifPath) {\n        console.log('Ê£ÄÊµãÂà∞GIFË∑ØÂæÑÔºåËá™Âä®ÂàáÊç¢Âà∞PNGÈÄêÂ∏ßÂä®ÁîªÊ®°Âºè');\n        return this.loadFrames();\n    }\n\n    // ÂÖºÂÆπÊóßÁâàÊú¨ÁöÑÊñπÊ≥ï\n    init() {\n        console.log('ARÂä®ÁîªÂàùÂßãÂåñÂÆåÊàê');\n    }\n\n    showAnimation(position, size) {\n        this.start(null, position, size);\n    }\n\n    hideAnimation() {\n        this.stop();\n    }\n\n    update() {\n        // Ëøô‰∏™ÊñπÊ≥ï‰øùÁïôÁî®‰∫éÂÖºÂÆπÊÄß\n    }\n\n    dispose() {\n        this.stop();\n        \n        // Ê∏ÖÁêÜÂ∏ßÂõæÁâá\n        this.frames = [];\n        this.isLoaded = false;\n        \n        // Ê∏ÖÁêÜÁºìÂ≠ò\n        this.cachedSizes.clear();\n        \n        console.log('ARÂä®ÁîªËµÑÊ∫êÂ∑≤Ê∏ÖÁêÜ');\n    }\n} ","export class ImageTracker {\n    constructor() {\n        this.lastDetection = null;\n        this.detectionTimeout = 500; // Â¢ûÂä†Âà∞500msÔºåÂáèÂ∞ëÈáçÂ§çÊ£ÄÊµã\n        this.templates = [];\n        this.threshold = 0.15; // Èôç‰ΩéÂåπÈÖçÈòàÂÄºÔºåÊèêÈ´òÊ£ÄÊµãÁÅµÊïèÂ∫¶\n        this.debugMode = false;\n        this.lastDetectionTime = 0;\n        this.detectionInterval = 250; // Â¢ûÂä†Âà∞250msÔºåÂ§ßÂπÖÂáèÂ∞ëCPU‰ΩøÁî®\n        this.isInitialized = false;\n        \n        // ÊÄßËÉΩ‰ºòÂåñÔºöÁºìÂ≠òÊ£ÄÊµãÁªìÊûú\n        this.detectionCache = new Map();\n        this.cacheTimeout = 1000; // ÁºìÂ≠ò1Áßí\n        \n        // Âª∂ËøüÂàùÂßãÂåñÔºåÂáèÂ∞ëÂêØÂä®Êó∂Èó¥\n        setTimeout(() => {\n            this.isInitialized = true;\n            console.log('ÂõæÁâáËøΩË∏™Âô®Âª∂ËøüÂàùÂßãÂåñÂÆåÊàê');\n        }, 200); // ÂáèÂ∞ëÂª∂ËøüÊó∂Èó¥\n    }\n\n    // Ê∑ªÂä†Ê®°ÊùøÂõæÁâá - Ëøõ‰∏ÄÊ≠•‰ºòÂåñÁâàÊú¨\n    addTemplate(imageUrl, name = 'template') {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.crossOrigin = 'anonymous';\n            \n            // ËÆæÁΩÆÂä†ËΩΩË∂ÖÊó∂\n            const timeout = setTimeout(() => {\n                reject(new Error('ÂõæÁâáÂä†ËΩΩË∂ÖÊó∂'));\n            }, 2000); // ÂáèÂ∞ëË∂ÖÊó∂Êó∂Èó¥\n            \n            img.onload = () => {\n                clearTimeout(timeout);\n                \n                // ‰ºòÂåñcanvasÂàõÂª∫\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n                \n                // Ëøõ‰∏ÄÊ≠•ÈôêÂà∂ÂõæÁâáÂ∞∫ÂØ∏‰ª•ÊèêÈ´òÊÄßËÉΩ\n                const maxSize = 150; // ÂáèÂ∞ëÊúÄÂ§ßÂ∞∫ÂØ∏\n                const scale = Math.min(maxSize / img.width, maxSize / img.height, 1);\n                canvas.width = img.width * scale;\n                canvas.height = img.height * scale;\n                \n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n                \n                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                this.templates.push({\n                    name,\n                    imageData,\n                    width: canvas.width,\n                    height: canvas.height\n                });\n                \n                console.log(`Ê®°ÊùøÂõæÁâá \"${name}\" Ê∑ªÂä†ÊàêÂäüÔºåÂ∞∫ÂØ∏: ${canvas.width}x${canvas.height}`);\n                resolve();\n            };\n            \n            img.onerror = (error) => {\n                clearTimeout(timeout);\n                console.error(`Ê®°ÊùøÂõæÁâá \"${name}\" Âä†ËΩΩÂ§±Ë¥•:`, error);\n                reject(error);\n            };\n            \n            img.src = imageUrl;\n        });\n    }\n\n    // ‰ºòÂåñÁöÑÂõæÁâáÊ£ÄÊµã\n    async detect(ctx, width, height) {\n        try {\n            // ÈôêÂà∂Ê£ÄÊµãÈ¢ëÁéá\n            const now = Date.now();\n            if (now - this.lastDetectionTime < this.detectionInterval) {\n                return this.lastDetection ? this.lastDetection.result : { detected: false };\n            }\n            this.lastDetectionTime = now;\n\n            // Ê£ÄÊü•ÁºìÂ≠ò\n            const cacheKey = `${width}x${height}`;\n            const cachedResult = this.detectionCache.get(cacheKey);\n            if (cachedResult && now - cachedResult.timestamp < this.cacheTimeout) {\n                return cachedResult.result;\n            }\n\n            // Ê£ÄÊü•ÊòØÂê¶ÊúâÊúâÊïàÁöÑÊ£ÄÊµãÁªìÊûú\n            if (this.lastDetection && \n                now - this.lastDetection.timestamp < this.detectionTimeout) {\n                return this.lastDetection.result;\n            }\n\n            // Ëé∑ÂèñÂΩìÂâçÂ∏ßÁöÑÂõæÂÉèÊï∞ÊçÆ\n            const frameData = ctx.getImageData(0, 0, width, height);\n            \n            // ÂØπÊØè‰∏™Ê®°ÊùøËøõË°åÂåπÈÖç\n            for (const template of this.templates) {\n                const match = this.matchTemplateOptimized(frameData, template, width, height);\n                \n                if (match && match.confidence > this.threshold) {\n                    const result = {\n                        detected: true,\n                        type: 'image',\n                        name: template.name,\n                        position: match.position,\n                        size: match.size,\n                        confidence: match.confidence\n                    };\n                    \n                    // ÁºìÂ≠òÁªìÊûú\n                    this.detectionCache.set(cacheKey, {\n                        timestamp: now,\n                        result: result\n                    });\n                    \n                    this.lastDetection = {\n                        timestamp: now,\n                        result: result\n                    };\n                    \n                    console.log(`‚úÖ Ê£ÄÊµãÂà∞ÂõæÁâá \"${template.name}\"ÔºåÂåπÈÖçÂ∫¶: ${match.confidence.toFixed(3)}`);\n                    return result;\n                }\n            }\n\n            // Â¶ÇÊûúÊ≤°ÊúâÊ£ÄÊµãÂà∞ÂõæÁâáÔºåÊ∏ÖÈô§‰∏äÊ¨°Ê£ÄÊµãÁªìÊûú\n            if (this.lastDetection && \n                now - this.lastDetection.timestamp > this.detectionTimeout) {\n                this.lastDetection = null;\n            }\n\n            // ÁºìÂ≠òÊú™Ê£ÄÊµãÂà∞ÁªìÊûú\n            const noDetectionResult = { detected: false };\n            this.detectionCache.set(cacheKey, {\n                timestamp: now,\n                result: noDetectionResult\n            });\n\n            return noDetectionResult;\n\n        } catch (error) {\n            console.error('ÂõæÁâáÊ£ÄÊµãÈîôËØØ:', error);\n            return { detected: false };\n        }\n    }\n\n    // ‰ºòÂåñÁöÑÊ®°ÊùøÂåπÈÖçÁÆóÊ≥ï\n    matchTemplateOptimized(frameData, template, frameWidth, frameHeight) {\n        const templateWidth = template.width;\n        const templateHeight = template.height;\n        \n        // Â¶ÇÊûúÊ®°ÊùøÂ§™Â§ßÔºåË∑≥Ëøá\n        if (templateWidth > frameWidth || templateHeight > frameHeight) {\n            return null;\n        }\n\n        let bestMatch = null;\n        let bestConfidence = 0;\n\n        // Â¢ûÂä†ÊêúÁ¥¢Ê≠•Èïø‰ª•ÊèêÈ´òÊÄßËÉΩ\n        const step = Math.max(3, Math.floor(Math.min(templateWidth, templateHeight) / 20));\n        \n        // ÈôêÂà∂ÊêúÁ¥¢ËåÉÂõ¥ÔºåÂè™ÊêúÁ¥¢‰∏≠ÂøÉÂå∫Âüü\n        const searchMargin = Math.min(80, Math.floor(Math.min(frameWidth, frameHeight) * 0.08));\n        const startX = searchMargin;\n        const startY = searchMargin;\n        const endX = frameWidth - templateWidth - searchMargin;\n        const endY = frameHeight - templateHeight - searchMargin;\n        \n        // ‰ΩøÁî®Êõ¥Â∞ëÁöÑÈááÊ†∑ÁÇπ\n        const maxSamples = 100; // ÈôêÂà∂ÊúÄÂ§ßÈááÊ†∑Êï∞\n        let sampleCount = 0;\n        \n        for (let y = startY; y <= endY && sampleCount < maxSamples; y += step) {\n            for (let x = startX; x <= endX && sampleCount < maxSamples; x += step) {\n                sampleCount++;\n                \n                const confidence = this.calculateSimilarityFast(\n                    frameData, template.imageData,\n                    x, y, frameWidth,\n                    0, 0, templateWidth,\n                    templateWidth, templateHeight\n                );\n\n                if (confidence > bestConfidence) {\n                    bestConfidence = confidence;\n                    bestMatch = {\n                        position: { x, y },\n                        size: { width: templateWidth, height: templateHeight },\n                        confidence\n                    };\n                    \n                    // Â¶ÇÊûúÊâæÂà∞ÂæàÂ•ΩÁöÑÂåπÈÖçÔºåÊèêÂâçÈÄÄÂá∫\n                    if (confidence > 0.8) {\n                        return bestMatch;\n                    }\n                }\n            }\n        }\n\n        return bestMatch;\n    }\n\n    // Âø´ÈÄüÁõ∏‰ººÂ∫¶ËÆ°ÁÆó\n    calculateSimilarityFast(frameData, templateData, frameX, frameY, frameWidth, \n                           templateX, templateY, templateWidth, width, height) {\n        let totalDiff = 0;\n        let totalPixels = 0;\n\n        // ‰ΩøÁî®Êõ¥Â∞ëÁöÑÈááÊ†∑ÁÇπËøõË°åËÆ°ÁÆó\n        const sampleStep = Math.max(1, Math.floor(Math.min(width, height) / 10));\n        \n        for (let y = 0; y < height; y += sampleStep) {\n            for (let x = 0; x < width; x += sampleStep) {\n                const frameIndex = ((frameY + y) * frameWidth + (frameX + x)) * 4;\n                const templateIndex = ((templateY + y) * templateWidth + (templateX + x)) * 4;\n\n                // Âè™ËÆ°ÁÆóRGBÂ∑ÆÂºÇÔºåÂøΩÁï•AlphaÈÄöÈÅì\n                const rDiff = Math.abs(frameData.data[frameIndex] - templateData.data[templateIndex]);\n                const gDiff = Math.abs(frameData.data[frameIndex + 1] - templateData.data[templateIndex + 1]);\n                const bDiff = Math.abs(frameData.data[frameIndex + 2] - templateData.data[templateIndex + 2]);\n\n                totalDiff += (rDiff + gDiff + bDiff) / 3;\n                totalPixels++;\n            }\n        }\n\n        // ËÆ°ÁÆóÁõ∏‰ººÂ∫¶Ôºà0-1Ôºå1Ë°®Á§∫ÂÆåÂÖ®ÂåπÈÖçÔºâ\n        if (totalPixels === 0) return 0;\n        const averageDiff = totalDiff / totalPixels;\n        return Math.max(0, 1 - averageDiff / 255);\n    }\n\n    // ÂéüÂßãÊ®°ÊùøÂåπÈÖçÁÆóÊ≥ïÔºà‰øùÁïôÁî®‰∫éÂÖºÂÆπÊÄßÔºâ\n    matchTemplate(frameData, template, frameWidth, frameHeight) {\n        return this.matchTemplateOptimized(frameData, template, frameWidth, frameHeight);\n    }\n\n    // ÂéüÂßãÁõ∏‰ººÂ∫¶ËÆ°ÁÆóÔºà‰øùÁïôÁî®‰∫éÂÖºÂÆπÊÄßÔºâ\n    calculateSimilarity(frameData, templateData, frameX, frameY, frameWidth, \n                       templateX, templateY, templateWidth, width, height) {\n        return this.calculateSimilarityFast(frameData, templateData, frameX, frameY, frameWidth, \n                                          templateX, templateY, templateWidth, width, height);\n    }\n\n    // ÁÆÄÂåñÁöÑÂõæÁâáÊ£ÄÊµãÔºàÂü∫‰∫éÈ¢úËâ≤ÂíåÂΩ¢Áä∂ÁâπÂæÅÔºâ\n    detectSimple(ctx, width, height) {\n        try {\n            const imageData = ctx.getImageData(0, 0, width, height);\n            \n            // ÂØªÊâæÈ´òÂØπÊØîÂ∫¶Âå∫Âüü\n            const regions = this.findHighContrastRegions(imageData, width, height);\n            \n            for (const region of regions) {\n                if (this.isImageLike(region, imageData, width, height)) {\n                    return {\n                        detected: true,\n                        type: 'simple',\n                        position: { x: region.x, y: region.y },\n                        size: { width: region.width, height: region.height },\n                        confidence: 0.5\n                    };\n                }\n            }\n            \n            return { detected: false };\n            \n        } catch (error) {\n            console.error('ÁÆÄÂåñÊ£ÄÊµãÈîôËØØ:', error);\n            return { detected: false };\n        }\n    }\n\n    // ÂØªÊâæÈ´òÂØπÊØîÂ∫¶Âå∫Âüü\n    findHighContrastRegions(imageData, width, height) {\n        const regions = [];\n        const regionSize = 50;\n        const step = 25;\n        \n        for (let y = 0; y < height - regionSize; y += step) {\n            for (let x = 0; x < width - regionSize; x += step) {\n                const contrast = this.calculateRegionContrast(imageData, x, y, regionSize, width);\n                \n                if (contrast > 30) { // Èôç‰ΩéÂØπÊØîÂ∫¶ÈòàÂÄº\n                    regions.push({\n                        x, y, width: regionSize, height: regionSize, contrast\n                    });\n                }\n            }\n        }\n        \n        // ÊåâÂØπÊØîÂ∫¶ÊéíÂ∫èÔºåËøîÂõûÂâçÂá†‰∏™\n        return regions.sort((a, b) => b.contrast - a.contrast).slice(0, 3);\n    }\n\n    // ËÆ°ÁÆóÂå∫ÂüüÂØπÊØîÂ∫¶\n    calculateRegionContrast(imageData, x, y, size, width) {\n        let minBrightness = 255;\n        let maxBrightness = 0;\n        \n        for (let dy = 0; dy < size; dy++) {\n            for (let dx = 0; dx < size; dx++) {\n                const index = ((y + dy) * width + (x + dx)) * 4;\n                const brightness = (imageData.data[index] + imageData.data[index + 1] + imageData.data[index + 2]) / 3;\n                \n                minBrightness = Math.min(minBrightness, brightness);\n                maxBrightness = Math.max(maxBrightness, brightness);\n            }\n        }\n        \n        return maxBrightness - minBrightness;\n    }\n\n    // Ê£ÄÊü•Âå∫ÂüüÊòØÂê¶ÂÉèÂõæÁâá\n    isImageLike(region, imageData, width, height) {\n        // ÁÆÄÂçïÁöÑÂõæÁâáÁâπÂæÅÊ£ÄÊü•\n        const edgeDensity = this.calculateEdgeDensity(imageData, region.x, region.y, region.width, region.height, width);\n        return edgeDensity > 0.1; // ËæπÁºòÂØÜÂ∫¶ÈòàÂÄº\n    }\n\n    // ËÆ°ÁÆóËæπÁºòÂØÜÂ∫¶\n    calculateEdgeDensity(imageData, x, y, w, h, width) {\n        let edgeCount = 0;\n        let totalPixels = 0;\n        \n        for (let dy = 1; dy < h - 1; dy++) {\n            for (let dx = 1; dx < w - 1; dx++) {\n                const index = ((y + dy) * width + (x + dx)) * 4;\n                const center = (imageData.data[index] + imageData.data[index + 1] + imageData.data[index + 2]) / 3;\n                \n                // Ê£ÄÊü•Âë®Âõ¥ÂÉèÁ¥†\n                const left = ((y + dy) * width + (x + dx - 1)) * 4;\n                const leftBrightness = (imageData.data[left] + imageData.data[left + 1] + imageData.data[left + 2]) / 3;\n                \n                if (Math.abs(center - leftBrightness) > 20) {\n                    edgeCount++;\n                }\n                \n                totalPixels++;\n            }\n        }\n        \n        return totalPixels > 0 ? edgeCount / totalPixels : 0;\n    }\n\n    // Ê∏ÖÁêÜËµÑÊ∫ê\n    dispose() {\n        this.templates = [];\n        this.detectionCache.clear();\n        this.lastDetection = null;\n        console.log('ÂõæÁâáËøΩË∏™Âô®ËµÑÊ∫êÂ∑≤Ê∏ÖÁêÜ');\n    }\n} ","import { ARAnimation } from './ar-animation.js';\nimport { ImageTracker } from './image-tracker.js';\n\nconsole.log('ARÂ∫îÁî®ÂºÄÂßãÂä†ËΩΩ...');\n\n// Âø´ÈÄüÂêØÂä®Ê®°ÂºèÈÖçÁΩÆ\nconst FAST_START_CONFIG = {\n    // Âø´ÈÄüÂêØÂä®ÔºöÁ´ãÂç≥ÊòæÁ§∫ÁïåÈù¢ÔºåÂêéÂè∞Âä†ËΩΩËµÑÊ∫ê\n    enableFastStart: true,\n    // ËµÑÊ∫êÂä†ËΩΩË∂ÖÊó∂Êó∂Èó¥\n    resourceTimeout: 2000,\n    // Ê£ÄÊµãÈó¥ÈöîÔºàÊØ´ÁßíÔºâ\n    detectionInterval: 200,\n    // ÁÆÄÂåñÊ£ÄÊµãÊ®°Âºè\n    simpleDetection: true,\n    // Âª∂ËøüÂàùÂßãÂåñËøΩË∏™Âô®\n    delayTrackerInit: 500\n};\n\n// Ê£ÄÊü•Âü∫Êú¨ÂäüËÉΩ\nfunction checkBasicFeatures() {\n    console.log('Ê£ÄÊü•Âü∫Êú¨ÂäüËÉΩ...');\n    \n    // Ê£ÄÊü•DOMÊòØÂê¶Âä†ËΩΩÂÆåÊàê\n    if (document.readyState === 'loading') {\n        console.log('DOMËøòÂú®Âä†ËΩΩ‰∏≠...');\n        return false;\n    }\n    \n    // Ê£ÄÊü•ÂøÖË¶ÅÁöÑÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®\n    const startARBtn = document.getElementById('startAR');\n    const startScreen = document.getElementById('startScreen');\n    const arScreen = document.getElementById('arScreen');\n    const loadingScreen = document.getElementById('loadingScreen');\n    \n    console.log('UIÂÖÉÁ¥†Ê£ÄÊü•:', {\n        startARBtn: !!startARBtn,\n        startScreen: !!startScreen,\n        arScreen: !!arScreen,\n        loadingScreen: !!loadingScreen\n    });\n    \n    if (!startARBtn || !startScreen || !arScreen || !loadingScreen) {\n        console.error('ÂøÖË¶ÅÁöÑUIÂÖÉÁ¥†Êú™ÊâæÂà∞ÔºÅ');\n        return false;\n    }\n    \n    return true;\n}\n\n// ‰ºòÂåñÁöÑARÂ∫îÁî®Á±ª\nclass OptimizedARApp {\n    constructor() {\n        console.log('ÂàùÂßãÂåñOptimizedARApp...');\n        this.isInitialized = false;\n        this.isTracking = false;\n        this.animation = null;\n        this.imageTracker = null;\n        this.detectionCanvas = null;\n        this.detectionCtx = null;\n        this.resourcesLoaded = false;\n        this.init();\n    }\n\n    init() {\n        console.log('ÂºÄÂßãÂø´ÈÄüÂàùÂßãÂåñ...');\n        \n        if (!checkBasicFeatures()) {\n            console.error('Âü∫Êú¨ÂäüËÉΩÊ£ÄÊü•Â§±Ë¥•');\n            this.hideLoading();\n            this.showError('Â∫îÁî®ÂàùÂßãÂåñÂ§±Ë¥•ÔºöÂü∫Êú¨ÂäüËÉΩÊ£ÄÊü•Â§±Ë¥•');\n            return;\n        }\n        \n        try {\n            this.initUI();\n            this.initEventListeners();\n            \n            // Âø´ÈÄüÂêØÂä®ÔºöÁ´ãÂç≥ÊòæÁ§∫ÁïåÈù¢\n            if (FAST_START_CONFIG.enableFastStart) {\n                this.isInitialized = true;\n                this.hideLoading();\n                this.showStartScreen(); // ÊòéÁ°ÆÊòæÁ§∫ÂêØÂä®ÁïåÈù¢\n                console.log('Âø´ÈÄüÂêØÂä®ÂÆåÊàêÔºåÁïåÈù¢Â∑≤ÊòæÁ§∫');\n                \n                // ÂêéÂè∞ÂºÇÊ≠•Âä†ËΩΩËµÑÊ∫ê\n                this.loadResourcesInBackground();\n            } else {\n                // ‰º†ÁªüÊ®°ÂºèÔºöÁ≠âÂæÖËµÑÊ∫êÂä†ËΩΩÂÆåÊàê\n                this.initTrackersAsync();\n            }\n            \n        } catch (error) {\n            console.error('ÂàùÂßãÂåñËøáÁ®ã‰∏≠Âá∫Èîô:', error);\n            this.hideLoading();\n            this.showError('Â∫îÁî®ÂàùÂßãÂåñÂ§±Ë¥•: ' + error.message);\n        }\n    }\n\n    initUI() {\n        console.log('ÂàùÂßãÂåñUIÂÖÉÁ¥†...');\n        this.startScreen = document.getElementById('startScreen');\n        this.arScreen = document.getElementById('arScreen');\n        this.loadingScreen = document.getElementById('loadingScreen');\n        this.startARBtn = document.getElementById('startAR');\n        this.backBtn = document.getElementById('backBtn');\n        this.captureBtn = document.getElementById('captureBtn');\n        this.status = document.getElementById('status');\n        this.video = document.getElementById('video');\n        this.canvas = document.getElementById('canvas');\n        \n        if (this.canvas) {\n            this.ctx = this.canvas.getContext('2d');\n        }\n        \n        // ÂàõÂª∫Ê£ÄÊµãÁî®ÁöÑcanvas\n        this.detectionCanvas = document.createElement('canvas');\n        this.detectionCtx = this.detectionCanvas.getContext('2d');\n        \n        console.log('UIÂÖÉÁ¥†ÂàùÂßãÂåñÂÆåÊàê');\n    }\n\n    async loadResourcesInBackground() {\n        console.log('ÂêéÂè∞Âä†ËΩΩËµÑÊ∫ê...');\n        \n        try {\n            // Âª∂ËøüÂàùÂßãÂåñËøΩË∏™Âô®ÔºåÂáèÂ∞ëÂêØÂä®Êó∂Èó¥\n            setTimeout(async () => {\n                await this.initTrackersAsync();\n            }, FAST_START_CONFIG.delayTrackerInit);\n            \n        } catch (error) {\n            console.error('ÂêéÂè∞ËµÑÊ∫êÂä†ËΩΩÂ§±Ë¥•:', error);\n        }\n    }\n\n    async initTrackersAsync() {\n        try {\n            console.log('ÂºÄÂßãÂºÇÊ≠•ÂàùÂßãÂåñËøΩË∏™Âô®...');\n            \n            // Âπ∂Ë°åÂàùÂßãÂåñÊ†∏ÂøÉÁªÑ‰ª∂\n            const [imageTracker, animation] = await Promise.allSettled([\n                this.createImageTracker(),\n                this.createAnimation()\n            ]);\n            \n            if (imageTracker.status === 'fulfilled') {\n                this.imageTracker = imageTracker.value;\n                console.log('ÂõæÁâáËøΩË∏™Âô®ÂàùÂßãÂåñÊàêÂäü');\n            }\n            \n            if (animation.status === 'fulfilled') {\n                this.animation = animation.value;\n                console.log('Âä®ÁîªÁªÑ‰ª∂ÂàùÂßãÂåñÊàêÂäü');\n            }\n            \n            this.resourcesLoaded = true;\n            console.log('ARÁªÑ‰ª∂ÂàùÂßãÂåñÂÆåÊàê');\n            \n        } catch (error) {\n            console.error('ËøΩË∏™Âô®ÂàùÂßãÂåñÂ§±Ë¥•:', error);\n        }\n    }\n\n    async createImageTracker() {\n        const tracker = new ImageTracker();\n        \n        // ËÆæÁΩÆÁÆÄÂåñÁöÑÊ£ÄÊµãÊ®°Âºè\n        if (FAST_START_CONFIG.simpleDetection) {\n            tracker.detectionInterval = FAST_START_CONFIG.detectionInterval;\n            tracker.threshold = 0.15; // Èôç‰ΩéÈòàÂÄºÔºåÊèêÈ´òÊ£ÄÊµãÁÅµÊïèÂ∫¶\n        }\n        \n        // Â∞ùËØïÂä†ËΩΩmarkerÔºå‰ΩÜ‰∏çÈòªÂ°û\n        try {\n            await tracker.addTemplate('/images/marker.png', 'marker');\n            console.log('MarkerÂä†ËΩΩÊàêÂäü');\n        } catch (error) {\n            console.log('MarkerÂä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®Â§áÁî®ÊñπÊ°à');\n            await this.addTestTemplate(tracker);\n        }\n        \n        return tracker;\n    }\n\n    async createAnimation() {\n        const animation = new ARAnimation();\n        \n        console.log('ÂàõÂª∫Âä®ÁîªÁªÑ‰ª∂...');\n        \n        // Â∞ùËØïÂä†ËΩΩPNGÂä®ÁîªÔºå‰ΩÜ‰∏çÈòªÂ°û\n        try {\n            await animation.loadFrames();\n            console.log('PNGÂä®ÁîªÂä†ËΩΩÊàêÂäü');\n            console.log('Âä®ÁîªÁä∂ÊÄÅ:', {\n                isLoaded: animation.isLoaded,\n                frameCount: animation.frameCount,\n                framesLength: animation.frames.length,\n                fps: animation.fps\n            });\n        } catch (error) {\n            console.log('PNGÂä®ÁîªÂä†ËΩΩÂ§±Ë¥•:', error.message);\n            // Âç≥‰ΩøÂä†ËΩΩÂ§±Ë¥•Ôºå‰πüËøîÂõûÂä®ÁîªÁªÑ‰ª∂ÔºåÈÅøÂÖç‰∏ªÂ∫îÁî®Â¥©Ê∫É\n        }\n        \n        return animation;\n    }\n\n    async addTestTemplate(tracker) {\n        try {\n            // ÂàõÂª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊµãËØïÊ®°Êùø\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n            canvas.width = 80;\n            canvas.height = 80;\n            \n            // ÁªòÂà∂‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊµãËØïÂõæÊ°à\n            ctx.fillStyle = '#FFFFFF';\n            ctx.fillRect(0, 0, 80, 80);\n            ctx.strokeStyle = '#000000';\n            ctx.lineWidth = 2;\n            ctx.strokeRect(10, 10, 60, 60);\n            ctx.fillStyle = '#000000';\n            ctx.fillRect(25, 25, 30, 30);\n            \n            // Â∞ÜcanvasËΩ¨Êç¢‰∏∫blob URL\n            canvas.toBlob((blob) => {\n                const url = URL.createObjectURL(blob);\n                tracker.addTemplate(url, 'test-marker');\n                console.log('ÊµãËØïÊ®°ÊùøÊ∑ªÂä†ÊàêÂäü');\n            });\n            \n        } catch (error) {\n            console.error('Ê∑ªÂä†ÊµãËØïÊ®°ÊùøÂ§±Ë¥•:', error);\n        }\n    }\n\n    initEventListeners() {\n        console.log('ÂàùÂßãÂåñ‰∫ã‰ª∂ÁõëÂê¨Âô®...');\n        \n        if (this.startARBtn) {\n            this.startARBtn.addEventListener('click', () => this.startAR());\n        }\n        \n        if (this.backBtn) {\n            this.backBtn.addEventListener('click', () => this.stopAR());\n        }\n        \n        if (this.captureBtn) {\n            this.captureBtn.addEventListener('click', () => this.capturePhoto());\n        }\n        \n        console.log('‰∫ã‰ª∂ÁõëÂê¨Âô®ÂàùÂßãÂåñÂÆåÊàê');\n    }\n\n    async startAR() {\n        console.log('ÂºÄÂßãAR‰ΩìÈ™å...');\n        console.log('ÂΩìÂâçÁä∂ÊÄÅ:', {\n            isInitialized: this.isInitialized,\n            resourcesLoaded: this.resourcesLoaded,\n            hasImageTracker: !!this.imageTracker,\n            hasAnimation: !!this.animation\n        });\n        \n        // ÊîæÂÆΩÂàùÂßãÂåñÊ£ÄÊü•ÔºåÂÖÅËÆ∏Âú®ËµÑÊ∫êÊú™ÂÆåÂÖ®Âä†ËΩΩÊó∂ÂêØÂä®\n        if (!this.isInitialized) {\n            console.log('Â∫îÁî®Êú™ÂÆåÂÖ®ÂàùÂßãÂåñÔºåÂ∞ùËØïÁªßÁª≠ÂêØÂä®...');\n            // ‰∏çÈòªÊ≠¢ÂêØÂä®ÔºåËÄåÊòØÁªßÁª≠Â∞ùËØï\n        }\n        \n        try {\n            this.showARScreen();\n            this.updateStatus('Ê≠£Âú®ÂêØÂä®ÊëÑÂÉèÂ§¥...');\n            \n            const cameraStarted = await this.requestCamera();\n            if (!cameraStarted) {\n                this.showError('Êó†Ê≥ïÂêØÂä®ÊëÑÂÉèÂ§¥ÔºåËØ∑Ê£ÄÊü•ÊùÉÈôêËÆæÁΩÆ');\n                return;\n            }\n            \n            this.updateStatus('ÊëÑÂÉèÂ§¥Â∑≤ÂêØÂä®ÔºåÁ≠âÂæÖËßÜÈ¢ëÂä†ËΩΩ...');\n            await this.waitForVideoLoad();\n            \n            // Â¶ÇÊûúËøΩË∏™Âô®ËøòÊ≤°ÂáÜÂ§áÂ•ΩÔºåÁ≠âÂæÖ‰∏Ä‰∏ã\n            if (!this.imageTracker) {\n                this.updateStatus('Ê≠£Âú®ÂáÜÂ§áÂõæÂÉèËØÜÂà´...');\n                await this.waitForTracker();\n            }\n            \n            this.updateStatus('ÂºÄÂßãËøΩË∏™marker...');\n            this.startTracking();\n            \n        } catch (error) {\n            console.error('ÂêØÂä®ARÂ§±Ë¥•:', error);\n            this.showError('ÂêØÂä®ARÂ§±Ë¥•: ' + error.message);\n        }\n    }\n\n    // Á≠âÂæÖËøΩË∏™Âô®ÂáÜÂ§áÂ∞±Áª™\n    async waitForTracker() {\n        return new Promise((resolve) => {\n            const checkTracker = () => {\n                if (this.imageTracker) {\n                    resolve();\n                } else {\n                    setTimeout(checkTracker, 100);\n                }\n            };\n            checkTracker();\n        });\n    }\n\n    startTracking() {\n        if (this.isTracking) return;\n        \n        this.isTracking = true;\n        this.trackFrame();\n        console.log('ÂºÄÂßãËøΩË∏™');\n    }\n\n    stopTracking() {\n        this.isTracking = false;\n        \n        if (this.animation) {\n            this.animation.stop();\n        }\n        \n        console.log('ÂÅúÊ≠¢ËøΩË∏™');\n    }\n\n    trackFrame() {\n        if (!this.isTracking || !this.video || !this.canvas || !this.ctx) return;\n        \n        try {\n            // ÁªòÂà∂ËßÜÈ¢ëÂ∏ßÂà∞canvas\n            this.ctx.drawImage(this.video, 0, 0, this.canvas.width, this.canvas.height);\n            \n            // Ê£ÄÊµãmarker\n            this.detectMarker();\n            \n            // ÁªßÁª≠‰∏ã‰∏ÄÂ∏ß\n            requestAnimationFrame(() => this.trackFrame());\n            \n        } catch (error) {\n            console.error('ËøΩË∏™Â∏ßÂ§ÑÁêÜÈîôËØØ:', error);\n            this.stopTracking();\n        }\n    }\n\n    async detectMarker() {\n        if (!this.imageTracker) {\n            console.log('ÂõæÁâáËøΩË∏™Âô®Êú™ÂáÜÂ§áÂ•ΩÔºåË∑≥ËøáÊ£ÄÊµã');\n            return;\n        }\n        \n        if (!this.ctx) {\n            console.log('Canvas‰∏ä‰∏ãÊñáÊú™ÂáÜÂ§áÂ•ΩÔºåË∑≥ËøáÊ£ÄÊµã');\n            return;\n        }\n        \n        try {\n            const detectionResult = await this.imageTracker.detect(\n                this.ctx, \n                this.canvas.width, \n                this.canvas.height\n            );\n            \n            if (detectionResult && detectionResult.detected) {\n                this.showAnimation(detectionResult);\n            } else {\n                this.hideAnimation();\n            }\n            \n        } catch (error) {\n            console.error('Ê£ÄÊµãmarkerÈîôËØØ:', error);\n            // ‰∏çÈòªÊ≠¢ÁªßÁª≠Ê£ÄÊµã\n        }\n    }\n\n    showAnimation(detectionResult) {\n        if (!this.animation) {\n            console.log('Âä®ÁîªÁªÑ‰ª∂‰∏çÂ≠òÂú®ÔºåË∑≥ËøáÊòæÁ§∫');\n            return;\n        }\n        \n        if (!this.canvas) {\n            console.log('Canvas‰∏çÂ≠òÂú®ÔºåË∑≥ËøáÊòæÁ§∫');\n            return;\n        }\n        \n        if (!detectionResult || !detectionResult.position || !detectionResult.size) {\n            console.log('Ê£ÄÊµãÁªìÊûúÊï∞ÊçÆ‰∏çÂÆåÊï¥ÔºåË∑≥ËøáÊòæÁ§∫');\n            return;\n        }\n        \n        try {\n            // ‰ºòÂåñ‰ΩçÁΩÆËÆ°ÁÆóÔºöÊòæÁ§∫Âú®markerÊ≠£‰∏äÊñπ\n            const position = {\n                x: detectionResult.position.x + detectionResult.size.width / 2,\n                y: detectionResult.position.y - detectionResult.size.height * 0.8 // Âú®marker‰∏äÊñπÔºåÁïô‰∏Ä‰∫õÈó¥Ë∑ù\n            };\n            \n            // ‰ºòÂåñÂ∞∫ÂØ∏ËÆ°ÁÆóÔºöÁ°Æ‰øùÂä®ÁîªË∂≥Â§üÂ§ß‰∏îÊ∏ÖÊô∞\n            const size = {\n                width: Math.max(detectionResult.size.width * 1.5, 150), // ÊØîmarkerÂ§ß1.5ÂÄçÔºåÊúÄÂ∞è150px\n                height: Math.max(detectionResult.size.height * 1.5, 150)\n            };\n            \n            console.log('ÂáÜÂ§áÊòæÁ§∫Âä®Áîª', {\n                position: position,\n                size: size,\n                animationLoaded: this.animation.isLoaded,\n                framesCount: this.animation.frames ? this.animation.frames.length : 0,\n                frameCount: this.animation.frameCount,\n                canvasSize: `${this.canvas.width}x${this.canvas.height}`\n            });\n            \n            this.animation.start(this.canvas, position, size);\n            this.updateStatus('Ê£ÄÊµãÂà∞markerÔºåÊòæÁ§∫Âä®Áîª');\n            \n        } catch (error) {\n            console.error('ÊòæÁ§∫Âä®ÁîªÈîôËØØ:', error);\n            this.updateStatus('Âä®ÁîªÊòæÁ§∫Â§±Ë¥•: ' + error.message);\n        }\n    }\n\n    hideAnimation() {\n        if (this.animation) {\n            this.animation.stop();\n        }\n    }\n\n    async requestCamera() {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({\n                video: {\n                    width: { ideal: 640 },\n                    height: { ideal: 480 },\n                    facingMode: 'environment' // ‰ºòÂÖà‰ΩøÁî®ÂêéÁΩÆÊëÑÂÉèÂ§¥\n                }\n            });\n            \n            this.video.srcObject = stream;\n            this.video.play();\n            \n            console.log('ÊëÑÂÉèÂ§¥ÂêØÂä®ÊàêÂäü');\n            return true;\n            \n        } catch (error) {\n            console.error('ÊëÑÂÉèÂ§¥ÂêØÂä®Â§±Ë¥•:', error);\n            return false;\n        }\n    }\n\n    waitForVideoLoad() {\n        return new Promise((resolve, reject) => {\n            const timeout = setTimeout(() => {\n                reject(new Error('ËßÜÈ¢ëÂä†ËΩΩË∂ÖÊó∂'));\n            }, 5000);\n            \n            this.video.onloadedmetadata = () => {\n                clearTimeout(timeout);\n                \n                // ËÆæÁΩÆcanvasÂ∞∫ÂØ∏\n                this.canvas.width = this.video.videoWidth;\n                this.canvas.height = this.video.videoHeight;\n                \n                console.log('ËßÜÈ¢ëÂä†ËΩΩÂÆåÊàê');\n                resolve();\n            };\n            \n            this.video.onerror = (error) => {\n                clearTimeout(timeout);\n                reject(new Error('ËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•'));\n            };\n        });\n    }\n\n    stopAR() {\n        console.log('ÂÅúÊ≠¢AR‰ΩìÈ™å...');\n        \n        this.stopTracking();\n        \n        // ÂÅúÊ≠¢ÊëÑÂÉèÂ§¥\n        if (this.video && this.video.srcObject) {\n            const tracks = this.video.srcObject.getTracks();\n            tracks.forEach(track => track.stop());\n            this.video.srcObject = null;\n        }\n        \n        this.showStartScreen();\n        this.updateStatus('AR‰ΩìÈ™åÂ∑≤ÂÅúÊ≠¢');\n    }\n\n    capturePhoto() {\n        if (!this.canvas) return;\n        \n        try {\n            // ÂàõÂª∫ÊãçÁÖßcanvas\n            const photoCanvas = document.createElement('canvas');\n            const photoCtx = photoCanvas.getContext('2d');\n            \n            photoCanvas.width = this.canvas.width;\n            photoCanvas.height = this.canvas.height;\n            \n            // ÁªòÂà∂ÂΩìÂâçÂ∏ß\n            photoCtx.drawImage(this.canvas, 0, 0);\n            \n            // ËΩ¨Êç¢‰∏∫ÂõæÁâá\n            const photoDataUrl = photoCanvas.toDataURL('image/png');\n            \n            // ÂàõÂª∫‰∏ãËΩΩÈìæÊé•\n            const link = document.createElement('a');\n            link.download = `ar-photo-${Date.now()}.png`;\n            link.href = photoDataUrl;\n            link.click();\n            \n            this.updateStatus('ÁÖßÁâáÂ∑≤‰øùÂ≠ò');\n            console.log('ÁÖßÁâáÂ∑≤‰øùÂ≠ò');\n            \n        } catch (error) {\n            console.error('ÊãçÁÖßÂ§±Ë¥•:', error);\n            this.updateStatus('ÊãçÁÖßÂ§±Ë¥•');\n        }\n    }\n\n    showLoading() {\n        if (this.loadingScreen) {\n            this.loadingScreen.style.display = 'flex';\n        }\n        if (this.startScreen) {\n            this.startScreen.style.display = 'none';\n        }\n        if (this.arScreen) {\n            this.arScreen.style.display = 'none';\n        }\n    }\n\n    hideLoading() {\n        if (this.loadingScreen) {\n            this.loadingScreen.style.display = 'none';\n        }\n    }\n\n    showStartScreen() {\n        if (this.startScreen) {\n            this.startScreen.style.display = 'flex';\n        }\n        if (this.arScreen) {\n            this.arScreen.style.display = 'none';\n        }\n        if (this.loadingScreen) {\n            this.loadingScreen.style.display = 'none';\n        }\n    }\n\n    showARScreen() {\n        if (this.arScreen) {\n            this.arScreen.style.display = 'flex';\n        }\n        if (this.startScreen) {\n            this.startScreen.style.display = 'none';\n        }\n        if (this.loadingScreen) {\n            this.loadingScreen.style.display = 'none';\n        }\n    }\n\n    updateStatus(message) {\n        if (this.status) {\n            this.status.textContent = message;\n        }\n        console.log('Áä∂ÊÄÅÊõ¥Êñ∞:', message);\n    }\n\n    showError(message) {\n        console.error('ÈîôËØØ:', message);\n        this.updateStatus('ÈîôËØØ: ' + message);\n        \n        // 3ÁßíÂêéÊ∏ÖÈô§ÈîôËØØ‰ø°ÊÅØ\n        setTimeout(() => {\n            this.updateStatus('');\n        }, 3000);\n    }\n}\n\n// ÂàùÂßãÂåñÂ∫îÁî®\nfunction initApp() {\n    console.log('ÂºÄÂßãÂàùÂßãÂåñARÂ∫îÁî®...');\n    \n    // Ê£ÄÊü•ÊµèËßàÂô®ÂÖºÂÆπÊÄß\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        alert('ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅÊëÑÂÉèÂ§¥ÂäüËÉΩÔºåËØ∑‰ΩøÁî®Áé∞‰ª£ÊµèËßàÂô®');\n        return;\n    }\n    \n    // ÂàõÂª∫Â∫îÁî®ÂÆû‰æã\n    window.arApp = new OptimizedARApp();\n}\n\n// Á≠âÂæÖDOMÂä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initApp);\n} else {\n    initApp();\n} "],"names":["ARAnimation","canvas","position","size","currentTime","f","frame","drawInfo","cacheKey","centerX","centerY","minSize","maxSize","frameWidth","frameHeight","scale","drawWidth","drawHeight","drawX","drawY","viewportWidth","viewportHeight","finalX","finalY","resolve","reject","framePaths","loadedCount","errorCount","totalFrames","overallTimeout","path","index","img","error","gifPath","ImageTracker","imageUrl","name","timeout","ctx","imageData","width","height","now","cachedResult","frameData","template","match","result","noDetectionResult","templateWidth","templateHeight","bestMatch","bestConfidence","step","searchMargin","startX","startY","endX","endY","maxSamples","sampleCount","y","x","confidence","templateData","frameX","frameY","templateX","templateY","totalDiff","totalPixels","sampleStep","frameIndex","templateIndex","rDiff","gDiff","bDiff","averageDiff","regions","region","contrast","a","b","minBrightness","maxBrightness","dy","dx","brightness","w","h","edgeCount","center","left","leftBrightness","FAST_START_CONFIG","checkBasicFeatures","startARBtn","startScreen","arScreen","loadingScreen","OptimizedARApp","imageTracker","animation","tracker","blob","url","checkTracker","detectionResult","stream","track","photoCanvas","photoCtx","photoDataUrl","link","message","initApp"],"mappings":"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"}